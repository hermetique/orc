                      THE ORC PROGRAMMING LANGUAGE
                   STRUCTURED CONCURRENT PROGRAMMING

                   The University of Texas at Austin


                 INSTALL for PorcE Truffle Interpereter


Overview
--------

This project contain a Truffle-based interpreter for Orc. Truffle and 
associated technologies are also called, variously, GraalVM, Polyglot, and 
PolyglotVM. This is not to be confused with the Graal backend compiler which
is used by truffle and may eventually replace the C2 JVM compiler. Also, the
SubstrateVM (also occasionally called the GraalVM) is a separate non-JVM way
to use Graal (the backend compiler) and not directly related to Truffle per 
se.

You will note that this ecosystem is very confusing and a total mess. That is
because it is currently a technology demo which is expected to be included in
Java 9. For the moment, here are instructions on how to install a GraalVM that
can run PorcE and how to connect it to this project. In addition, there are 
instructions for setting up a launch configuration for PorcE.

Setup instructions
------------------

1. Download GraalVM 0.26 from 
   http://www.oracle.com/technetwork/oracle-labs/program-languages/downloads/index.html 
   (requires login) and unpack it to $UNPACK (any directory). You will need to replace 
   "$UNPACK" with the absolute path you unpacked to in all the further instructions.
2. Add a new JRE in Eclipse (Eclipse Preferences -> Java / Installed JREs -> Add),
   type "Standard VM".
3. Set:
    * JRE home: $UNPACK/graalvm-0.26/jre (NOT the root graalvm-0.26 directory)
    * JRE name: graalvm-0.26
    * Default VM arguments: -XX:-UseJVMCIClassLoader
4. Under JRE system libraries, Add External JARs:
    * $UNPACK/graalvm-0.26/jre/lib/truffle/truffle-api.jar
    * $UNPACK/graalvm-0.26/jre/lib/jvmci/graal.jar
5. Add a Classpath Variable (Eclipse Preferences -> Java -> Build Path -> Classpath 
   Variables) named GRAALVM_JRE and set it to "$UNPACK/graalvm-0.26/jre". This allows
   PorcE to find the annotation processor used by the Truffle code.
6. Rebuild the PorcE project.

Launch instructions
-------------------

1. Create a new run configuration (Run -> Run Configurations) of type Java
   Application.
2. Set:
    * Name: PorcE [or your choice]
    * Project: PorcE
    * Main class to  orc.Main".
2. In the JRE tab, ensure that the project JRE is set to your new graalvm JRE.
3. Set the command line arguments as needed to launch the Orc program you need.

Running PorcE from the Orc Eclipse plug-in is unsupported for now.


NOTE:  All of this will change when a Java 9 preview with Graal support is released.
